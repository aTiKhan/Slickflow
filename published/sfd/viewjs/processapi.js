import jshelper from"../script/jshelper.js";import kconfig from"../config/kconfig.js";const processapi=function(){function e(){}return e.create=function(e,s,o){jshelper.ajaxPost(kconfig.webApiUrl+"api/Wf2Xml/CreateProcess",JSON.stringify(e),(function(e){1===e.Status?!0===s&&kmsgbox.info(e.Message):kmsgbox.error(e.Message),o(e)}))},e.executeProcessGraph=function(e,s){jshelper.ajaxPost(kconfig.webApiUrl+"api/Wf2Xml/ExecuteProcessGraph",JSON.stringify(e),(function(e){1===e.Status?(kmsgbox.info(e.Message),s(e.Entity)):kmsgbox.warn(e.Message)}))},e.update=function(e){jshelper.ajaxPost(kconfig.webApiUrl+"api/Wf2Xml/UpdateProcess",JSON.stringify(e),(function(e){1===e.Status?kmsgbox.info(e.Message):kmsgbox.error(e.Message)}))},e.upgrade=function(e){jshelper.ajaxPost(kconfig.webApiUrl+"api/Wf2Xml/UpgradeProcess",JSON.stringify(e),(function(e){1===e.Status?(kmsgbox.info(e.Message),processlist.getProcessList()):kmsgbox.error(e.Message)}))},e.updateUsingState=function(e){jshelper.ajaxPost(kconfig.webApiUrl+"api/Wf2Xml/UpdateProcessUsingState",JSON.stringify(e),(function(e){1===e.Status?(kmsgbox.info(e.Message),processlist.getProcessList()):kmsgbox.error(e.Message)}))},e.delete=function(e){jshelper.ajaxPost(kconfig.webApiUrl+"api/Wf2Xml/DeleteProcess",JSON.stringify(e),(function(e){1===e.Status?(kmsgbox.info(e.Message),processlist.getProcessList()):kmsgbox.error(e.Message)}))},e.InitNewBPMNFile=function(e){jshelper.ajaxGet(kconfig.webApiUrl+"api/Wf2Xml/InitNewBPMNFile",null,(function(s){e(s)}))},e.queryProcessFile=function(e,s){jshelper.ajaxPost(kconfig.webApiUrl+"api/Wf2Xml/QueryProcessFile",JSON.stringify(e),(function(e){s(e)}))},e.checkProcessFile=function(e,s){jshelper.ajaxPost(kconfig.webApiUrl+"api/Wf2Xml/CheckProcessFile",JSON.stringify(e),(function(e){s(e)}))},e.queryProcessFileByID=function(e,s){jshelper.ajaxPost(kconfig.webApiUrl+"api/Wf2Xml/QueryProcessFileByID",JSON.stringify(e),(function(e){s(e)}))},e.saveProcessFile=function(e,s){jshelper.ajaxPost(kconfig.webApiUrl+"api/Wf2Xml/SaveProcessFile",JSON.stringify(e),(function(e){s(e)}))},e.loadTemplate=function(e){var s=processmodel.mprocessTemplate[e];void 0===s||""===s?jshelper.ajaxGet(kconfig.webApiUrl+"api/Wf2Xml/LoadProcessTemplate/"+e,null,(function(s){if(1===s.Status){var o=s.Entity;processmodel.mcodemirrorEditor.setValue(o.Content),processmodel.mprocessTemplate[e]=o.Content}else kmsgbox.warn(s.Message)})):processmodel.mcodemirrorEditor.setValue(s)},e}();export default processapi;